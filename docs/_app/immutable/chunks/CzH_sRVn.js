import"./Bzak7iHL.js";import{an as pa,A as la,ao as ma,ap as na,f as ia,aq as m,K as Fe,g as e,s as t,ad as Et,i as w,o as r,ar as o,r as s,k as p,l as va,j as Q,as as je,at as He,au as Xt,av as Dt,aw as ke,ax as $t}from"./6QfFowuy.js";import{o as ca,a as L,b as ha}from"./DWQsb6ku.js";import{p as st,i as M,b as Ot}from"./DVQw_HwI.js";import{c as fa,s as Qt,t as _a,l as ga,a as ya,m as ba,b as wa,r as xa,d as qa,e as Ca,f as ka,g as Ma,p as Pa,h as Sa,i as ht,j as Aa,k as Bt,n as Gt,o as De,q as he,u as Vt,v as ea,w as jt,x as ta,y as Ft,z as Na}from"./Dsj1Loz4.js";import{a as Ve,b as pt,r as ft,s as at}from"./D02pvyNW.js";import{b as mt}from"./BY3Tcu16.js";function ua(b,_,u){if(b.multiple)return La(b,_);for(var h of b.options){var B=Rt(h);if(ma(B,_)){h.selected=!0;return}}(!u||_!==void 0)&&(b.selectedIndex=-1)}function Ra(b,_){la(()=>{var u=new MutationObserver(()=>{var h=b.__value;ua(b,h)});return u.observe(b,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{u.disconnect()}})}function aa(b,_,u=_){var h=!0;pa(b,"change",B=>{var W=B?"[selected]":":checked",K;if(b.multiple)K=[].map.call(b.querySelectorAll(W),Rt);else{var d=b.querySelector(W)??b.querySelector("option:not([disabled])");K=d&&Rt(d)}u(K)}),la(()=>{var B=_();if(ua(b,B,h),h&&B===void 0){var W=b.querySelector(":checked");W!==null&&(B=Rt(W),u(B))}b.__value=B,h=!1}),Ra(b)}function La(b,_){for(var u of b.options)u.selected=~_.indexOf(Rt(u))}function Rt(b){return"__value"in b?b.__value:b.value}function Ha(b,_,u,h){t(_,!1),t(u,!0),t(h,!0)}function Da(b,_,u,h,B,W,K,d,j,P){t(_,!1),t(u,""),t(h,""),t(B,!1),t(W,!1),t(K,!1),t(d,null),t(j,!1),t(P,!1)}var Fa=w('<div class="possible-names svelte-4yt33h"><strong class="svelte-4yt33h"> </strong></div>'),Ba=w('<div class="names-revealed svelte-4yt33h"><span class="svelte-4yt33h"> </span> <span class="svelte-4yt33h">vs.</span> <span class="svelte-4yt33h"> </span></div>'),Ga=w('<div class="message-overlay correct-overlay svelte-4yt33h"><div class="message-text svelte-4yt33h">Correct! ðŸŽ‰</div></div>'),$a=w('<div class="message-overlay wrong-overlay svelte-4yt33h"><div class="message-text svelte-4yt33h">Try Again!</div></div>'),Ta=w('<div><span class="drop-label svelte-4yt33h"> </span></div> <div><span class="drop-label svelte-4yt33h"> </span></div>',1),Ya=w('<div class="tooltip svelte-4yt33h"><div class="tooltip-year svelte-4yt33h"> </div> <div class="svelte-4yt33h"> </div> <div class="svelte-4yt33h"> </div></div>'),Ia=w('<div draggable="true"> </div>'),za=w('<div draggable="true"> </div>'),Wa=w('<div class="drag-drop-instructions svelte-4yt33h"><strong class="svelte-4yt33h">Drag names to the chart lines:</strong></div> <div class="draggable-names svelte-4yt33h"><!> <!></div>',1),Ua=(b,_,u)=>_(e(u)),Va=w("<li> </li>"),ja=w('<ul class="suggestions svelte-4yt33h"></ul>'),Ea=(b,_,u)=>_(e(u)),Oa=w("<li> </li>"),Za=w('<ul class="suggestions svelte-4yt33h"></ul>'),Ka=(b,_,u,h,B,W,K,d,j)=>{console.log("Set Names & Start clicked! Current names:",e(_),e(u)),console.log("Setting isHidden to true"),t(h,!0),t(B,!1),t(W,""),t(K,""),t(d,!1),t(j,!1),console.log("isHidden is now:",e(h))},Ja=w('<div class="name-setup svelte-4yt33h"><div class="setup-group svelte-4yt33h"><label class="svelte-4yt33h">Choose Name 1 (Purple):</label> <div class="autocomplete-wrapper svelte-4yt33h"><input type="text" placeholder="Type a name..." class="svelte-4yt33h"> <!></div> <select class="gender-select svelte-4yt33h"><option class="svelte-4yt33h">All</option><option class="svelte-4yt33h">Female</option><option class="svelte-4yt33h">Male</option></select></div> <div class="setup-group svelte-4yt33h"><label class="svelte-4yt33h">Choose Name 2 (Pink):</label> <div class="autocomplete-wrapper svelte-4yt33h"><input type="text" placeholder="Type a name..." class="svelte-4yt33h"> <!></div> <select class="gender-select svelte-4yt33h"><option class="svelte-4yt33h">All</option><option class="svelte-4yt33h">Female</option><option class="svelte-4yt33h">Male</option></select></div></div> <div class="start-row svelte-4yt33h"><button class="start-btn svelte-4yt33h">Set Names & Start</button> <button class="random-btn svelte-4yt33h">Random Names</button></div>',1),Xa=w('<div class="button-row svelte-4yt33h"><div class="reveal-reset-group svelte-4yt33h"><button class="reveal-btn svelte-4yt33h">Reveal Names</button> <button class="reset-btn svelte-4yt33h">Reset</button></div></div>'),Qa=w('<div class="controls svelte-4yt33h"><!> <!></div>'),es=w('<div class="wrapper svelte-4yt33h"><!> <div class="chart-container svelte-4yt33h" style="position: relative;"><svg class="svelte-4yt33h"><g class="inner svelte-4yt33h"></g></svg> <!> <!> <!></div> <!> <!> <!></div>');function sa(b,_){ia(_,!0);const u=st(_,"csvUrl",19,()=>`${mt}/data/ssa_babynames_filtered.csv`),h=st(_,"height",3,360),B=st(_,"defaultName1",3,"Charlotte"),W=st(_,"defaultName2",3,"Isabella"),K=st(_,"startHidden",3,!0),d=st(_,"startYear",3,1880),j=st(_,"showControls",3,!0);let P=m(Fe(B())),G=m(Fe(W()));const fe=K()===!0||K()==="true";let T=m(Fe(fe)),E=m(""),se=m(""),pe=m(!1),_e=m(!1),Me=m(!1),Ee=m(!1),_t=m(!1),ge=m(null),Oe=m(!1),Ze=m(!1),gt=m(Fe({top:"20%",left:"60%"})),Be=m(Fe({top:"60%",left:"60%"})),J=Fe(typeof d()=="string"?parseInt(d()):d()),re=m(""),Ke=m(""),rt=m(Fe([])),ot=m(Fe([])),ye=m(-1),yt=m(-1),lt=m("All"),Pe=m("All"),Ge=[],bt,nt,Lt,Ht,c,A,y,H,D,S,ee,U=m(0),O,I,le,ce=[1880,2025],k=Fe({show:!1,x:0,y:0,year:0,name1:"",count1:0,name2:"",count2:0}),te=[],V=[];const F={top:10,right:10,bottom:30,left:35},$e="#6B46C1",me="#E85D75";ca(async()=>{Ge=(await fa(u(),v=>{const f=+v.year,q=String(v.name).trim(),n=String(v.sex).trim().toUpperCase(),C=+v.n;if(!(!Number.isFinite(f)||!q||!Number.isFinite(C))&&!(n!=="F"&&n!=="M"))return{year:f,name:q,sex:n,n:C}})).filter(Boolean);const l=new Set(Ge.map(v=>v.name));te=Array.from(l).sort();const i=new Map;Ge.forEach(v=>{i.set(v.name,(i.get(v.name)||0)+v.n)}),V=Array.from(i.entries()).sort((v,f)=>f[1]-v[1]).slice(0,1e3).map(([v])=>v),Te(),Ye()});function Te(){bt=Qt(nt).select("svg");const a=bt.select("g.inner");Lt=a.append("path").attr("class","line1").attr("fill","none").attr("stroke",$e).attr("stroke-width",3),Ht=a.append("path").attr("class","line2").attr("fill","none").attr("stroke",me).attr("stroke-width",3),c=a.append("g").attr("class","axis x-axis"),A=a.append("g").attr("class","axis y-axis"),y=a.append("g").attr("class","hover-group").style("display","none"),H=y.append("line").attr("stroke","#999").attr("stroke-width",1).attr("stroke-dasharray","4,4"),D=y.append("circle").attr("r",5).attr("fill",$e).attr("stroke","white").attr("stroke-width",2),S=y.append("circle").attr("r",5).attr("fill",me).attr("stroke","white").attr("stroke-width",2),ee=a.append("rect").attr("class","hover-rect").attr("fill","transparent"),O=_a(),I=ga(),le=ya().x(l=>O(l.date)).y(l=>I(l.count)).curve(ba)}function be(a,l){const i=a.trim().toLowerCase();let v=Ge.filter(n=>n.name.toLowerCase()===i);l!=="All"&&(v=v.filter(n=>n.sex===l));const f=new Map;v.forEach(n=>{f.set(n.year,(f.get(n.year)??0)+n.n)});const q=[];for(let n=J;n<=2024;n++){const C=f.get(n)??0;q.push({date:new Date(n,0,1),count:C})}return q}function Ye(){if(!Ge.length)return;const a=Math.max(0,e(U)),l=h(),i=Math.max(0,a-F.left-F.right),v=Math.max(0,l-F.top-F.bottom);bt.attr("width",a).attr("height",l),Qt(nt).select(".inner").attr("transform",`translate(${F.left},${F.top})`);const f=be(e(P),e(lt)),q=be(e(G),e(Pe)),n=[...f.map(z=>z.count),...q.map(z=>z.count)],C=Math.max(1,wa(n)??1);O.domain([new Date(J,0,1),new Date(2025,0,1)]).range([0,i]),I.domain([0,C]).nice().range([v,0]),Lt.attr("d",le(f)),Ht.attr("d",le(q));const N=e(U)<600?20:10,$=Math.ceil(J/N)*N,ve=xa($,2026,N).map(z=>new Date(z,0,1)),Pt=qa(O).tickValues(ve).tickFormat(Ca("%Y")),St=ka(I).ticks(5).tickFormat(Ma("~s"));if(c.attr("transform",`translate(0,${v})`).call(Pt),A.call(St),c.selectAll("text").style("font-family","Baloo Bhai 2, -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif").style("font-size","16px").attr("font-family","Baloo Bhai 2, -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif").attr("font-size","16px"),A.selectAll("text").style("font-family","Baloo Bhai 2, -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif").style("font-size","16px").attr("font-family","Baloo Bhai 2, -apple-system, BlinkMacSystemFont, Helvetica, Arial, sans-serif").attr("font-size","16px"),ee.attr("width",i).attr("height",v),H.attr("y1",0).attr("y2",v),ee.on("mousemove",function(z){const[ue]=Pa(z),qe=O.invert(ue).getFullYear(),de=f.find(X=>X.date.getFullYear()===qe),Ue=q.find(X=>X.date.getFullYear()===qe);if(de&&Ue){const X=O(de.date),ut=I(de.count),kt=I(Ue.count);H.attr("x1",X).attr("x2",X),D.attr("cx",X).attr("cy",ut),S.attr("cx",X).attr("cy",kt),y.style("display",null);const tt=nt.getBoundingClientRect();k.show=!0,k.x=tt.left+X+F.left,k.y=tt.top+Math.min(ut,kt)+F.top,k.year=qe,k.name1=e(T)?"Purple":e(P),k.count1=de.count,k.name2=e(T)?"Pink":e(G),k.count2=Ue.count}}).on("mouseleave",()=>{y.style("display","none"),k.show=!1}),e(T)&&f.length>0&&q.length>0){const z=Math.floor(J+(ce[1]-J)*.3),ue=f.find(de=>de.date.getFullYear()>=z)||f[Math.floor(f.length*.3)],We=Math.floor(J+(ce[1]-J)*.7),qe=q.find(de=>de.date.getFullYear()>=We)||q[Math.floor(q.length*.7)];if(ue&&qe){const de=I(ue.count),Ue=I(qe.count),X=(de+F.top)/(v+F.top+F.bottom)*100,ut=(Ue+F.top)/(v+F.top+F.bottom)*100,kt=X>25?-15:15,tt=ut<75?15:-15;t(gt,{top:`${Math.max(10,Math.min(80,X+kt))}%`,left:"30%"},!0),t(Be,{top:`${Math.max(10,Math.min(80,ut+tt))}%`,left:"70%"},!0)}}}Et(()=>{Ge.length&&Ye(),e(P),e(G),e(lt),e(Pe),e(U)});function wt(){const a=e(E).trim().toLowerCase(),l=e(se).trim().toLowerCase();t(pe,a===e(P).toLowerCase()),t(_e,l===e(G).toLowerCase()),t(Me,!0),e(pe)&&e(_e)?(t(Ee,!0),Aa({particleCount:100,spread:70,origin:{y:.6}}),setTimeout(()=>{t(T,!1),t(Ee,!1)},1e3)):(t(_t,!0),setTimeout(()=>{t(_t,!1)},1500),t(E,""),t(se,""),setTimeout(()=>{t(Me,!1)},1500))}function we(a){t(ge,a,!0)}function Je(){t(ge,null),t(Oe,!1),t(Ze,!1)}function xt(a){e(ge)&&(a===1?(t(E,e(ge),!0),t(Oe,!1)):a===2&&(t(se,e(ge),!0),t(Ze,!1)),t(ge,null),setTimeout(()=>{e(E)&&e(se)&&wt()},100))}function Ie(a,l){a.preventDefault(),l===1?t(Oe,!0):l===2&&t(Ze,!0)}function Se(a){a===1?t(Oe,!1):a===2&&t(Ze,!1)}function qt(){if(V.length<2)return;const a=Math.floor(Math.random()*V.length);let l=Math.floor(Math.random()*V.length);for(;l===a;)l=Math.floor(Math.random()*V.length);t(P,V[a],!0),t(G,V[l],!0),t(re,e(P),!0),t(Ke,e(G),!0),t(T,!0),t(E,""),t(se,""),t(pe,!1),t(_e,!1),t(Me,!1),Ye()}function Xe(a){const l=a.target.value;t(re,l,!0),l.length>0?(t(rt,te.filter(i=>i.toLowerCase().startsWith(l.toLowerCase())).slice(0,10),!0),t(ye,-1)):t(rt,[],!0)}function Ae(a){const l=a.target.value;t(Ke,l,!0),l.length>0?(t(ot,te.filter(i=>i.toLowerCase().startsWith(l.toLowerCase())).slice(0,10),!0),t(yt,-1)):t(ot,[],!0)}function it(a){t(P,a,!0),t(re,a,!0),t(rt,[],!0),t(ye,-1)}function vt(a){t(G,a,!0),t(Ke,a,!0),t(ot,[],!0),t(yt,-1)}var ze=es(),Ne=r(ze);{var Qe=a=>{var l=Fa(),i=r(l),v=r(i);s(i),s(l),Q(()=>L(v,`${e(P)??""} vs. ${e(G)??""}`)),p(a,l)},Mt=a=>{var l=Ba(),i=r(l);Ve(i,"color: #6B46C1; font-weight: bold;");var v=r(i,!0);s(i);var f=o(i,4);Ve(f,"color: #E85D75; font-weight: bold;");var q=r(f,!0);s(f),s(l),Q(()=>{L(v,e(P)),L(q,e(G))}),p(a,l)};M(Ne,a=>{e(T)?a(Qe):a(Mt,!1)})}var Re=o(Ne,2),et=o(r(Re),2);{var ct=a=>{var l=Ga();p(a,l)};M(et,a=>{e(Ee)&&a(ct)})}var Ct=o(et,2);{var g=a=>{var l=$a();p(a,l)};M(Ct,a=>{e(_t)&&a(g)})}var R=o(Ct,2);{var ae=a=>{var l=Ta(),i=je(l);let v;var f=r(i);Ve(f,"color: #6B46C1");var q=r(f,!0);s(f),s(i);var n=o(i,2);let C;var x=r(n);Ve(x,"color: #E85D75");var N=r(x,!0);s(x),s(n),Q(($,ve)=>{v=pt(i,1,"chart-drop-zone svelte-4yt33h",null,v,$),Ve(i,`border-color: #6B46C1; top: ${e(gt).top??""}; left: ${e(gt).left??""};`),L(q,e(E)||"â†“"),C=pt(n,1,"chart-drop-zone svelte-4yt33h",null,C,ve),Ve(n,`border-color: #E85D75; top: ${e(Be).top??""}; left: ${e(Be).left??""};`),L(N,e(se)||"â†“")},[()=>({highlighted:e(Oe)}),()=>({highlighted:e(Ze)})]),He("dragover",i,$=>Ie($,1)),He("dragleave",i,()=>Se(1)),He("drop",i,()=>xt(1)),He("dragover",n,$=>Ie($,2)),He("dragleave",n,()=>Se(2)),He("drop",n,()=>xt(2)),p(a,l)};M(R,a=>{e(T)&&a(ae)})}s(Re),Ot(Re,a=>nt=a,()=>nt);var ne=o(Re,2);{var Le=a=>{var l=Ya(),i=r(l),v=r(i,!0);s(i);var f=o(i,2);Ve(f,"color: #6B46C1; font-weight: 600;");var q=r(f);s(f);var n=o(f,2);Ve(n,"color: #E85D75; font-weight: 600;");var C=r(n);s(n),s(l),Q((x,N)=>{Ve(l,`left: ${k.x+10}px; top: ${k.y-10}px;`),L(v,k.year),L(q,`${k.name1??""}: ${x??""}`),L(C,`${k.name2??""}: ${N??""}`)},[()=>k.count1.toLocaleString(),()=>k.count2.toLocaleString()]),p(a,l)};M(ne,a=>{k.show&&a(Le)})}var xe=o(ne,2);{var Z=a=>{var l=Wa(),i=o(je(l),2),v=r(i);{var f=C=>{var x=Ia();let N;var $=r(x,!0);s(x),Q(ve=>{N=pt(x,1,"name-tag svelte-4yt33h",null,N,ve),L($,e(P))},[()=>({dragging:e(ge)===e(P)})]),He("dragstart",x,()=>we(e(P))),He("dragend",x,Je),p(C,x)};M(v,C=>{e(E)!==e(P)&&e(se)!==e(P)&&C(f)})}var q=o(v,2);{var n=C=>{var x=za();let N;var $=r(x,!0);s(x),Q(ve=>{N=pt(x,1,"name-tag svelte-4yt33h",null,N,ve),L($,e(G))},[()=>({dragging:e(ge)===e(G)})]),He("dragstart",x,()=>we(e(G))),He("dragend",x,Je),p(C,x)};M(q,C=>{e(E)!==e(G)&&e(se)!==e(G)&&C(n)})}s(i),p(a,l)};M(xe,a=>{e(T)&&a(Z)})}var ie=o(xe,2);{var Y=a=>{var l=Qa(),i=r(l);{var v=n=>{var C=Ja(),x=je(C),N=r(x),$=o(r(N),2),ve=r($);ft(ve),ve.__input=Xe;var Pt=o(ve,2);{var St=oe=>{var dt=ja();Bt(dt,21,()=>e(rt),Gt,(It,At,zt)=>{var Ce=Va();Ce.__click=[Ua,it,At];let Nt;var Wt=r(Ce,!0);s(Ce),Q(Ut=>{Nt=pt(Ce,1,"svelte-4yt33h",null,Nt,Ut),L(Wt,e(At))},[()=>({selected:zt===e(ye)})]),p(It,Ce)}),s(dt),p(oe,dt)};M(Pt,oe=>{e(rt).length>0&&oe(St)})}s($);var z=o($,2),ue=r(z);ue.value=ue.__value="All";var We=o(ue);We.value=We.__value="F";var qe=o(We);qe.value=qe.__value="M",s(z),s(N);var de=o(N,2),Ue=o(r(de),2),X=r(Ue);ft(X),X.__input=Ae;var ut=o(X,2);{var kt=oe=>{var dt=Za();Bt(dt,21,()=>e(ot),Gt,(It,At,zt)=>{var Ce=Oa();Ce.__click=[Ea,vt,At];let Nt;var Wt=r(Ce,!0);s(Ce),Q(Ut=>{Nt=pt(Ce,1,"svelte-4yt33h",null,Nt,Ut),L(Wt,e(At))},[()=>({selected:zt===e(yt)})]),p(It,Ce)}),s(dt),p(oe,dt)};M(ut,oe=>{e(ot).length>0&&oe(kt)})}s(Ue);var tt=o(Ue,2),Tt=r(tt);Tt.value=Tt.__value="All";var Yt=o(Tt);Yt.value=Yt.__value="F";var Zt=o(Yt);Zt.value=Zt.__value="M",s(tt),s(de),s(x);var Kt=o(x,2),Jt=r(Kt);Jt.__click=[Ka,P,G,T,Me,E,se,pe,_e];var da=o(Jt,2);da.__click=qt,s(Kt),ht(ve,()=>e(re),oe=>t(re,oe)),aa(z,()=>e(lt),oe=>t(lt,oe)),ht(X,()=>e(Ke),oe=>t(Ke,oe)),aa(tt,()=>e(Pe),oe=>t(Pe,oe)),p(n,C)};M(i,n=>{e(T)||n(v)})}var f=o(i,2);{var q=n=>{var C=Xa(),x=r(C),N=r(x);N.__click=[Ha,T,pe,_e];var $=o(N,2);$.__click=[Da,T,E,se,pe,_e,Me,ge,Oe,Ze],s(x),s(C),p(n,C)};M(f,n=>{e(T)&&n(q)})}s(l),p(a,l)};M(ie,a=>{(j()===!0||j()==="true")&&a(Y)})}s(ze),Sa(ze,"clientWidth",a=>t(U,a)),p(b,ze),va()}na(["input","click"]);async function ra(b,_,u){try{await navigator.clipboard.writeText(e(_)),t(u,"Copied!"),setTimeout(()=>{t(u,"Copy")},2e3)}catch(h){console.error("Failed to copy:",h)}}async function oa(b,_,u){try{const h=_();await navigator.clipboard.writeText(h),t(u,"Link Copied!"),setTimeout(()=>{t(u,"Copy Link")},2e3)}catch(h){console.error("Failed to copy link:",h)}}var ts=w(`<div class="multiplayer-menu svelte-49srq7"><h2 class="svelte-49srq7">Which Name Is Which? â€”Â Multiplayer Game</h2> <div class="menu-section svelte-49srq7"><h3 class="svelte-49srq7">Enter Your Name</h3> <input type="text" placeholder="Your name" class="name-input svelte-49srq7"></div> <div class="menu-section svelte-49srq7"><h3 class="svelte-49srq7">Join a Game</h3> <input type="text" placeholder="Enter room code" class="room-code-input svelte-49srq7"> <button class="join-btn svelte-49srq7">Join Game</button></div> <div class="menu-section svelte-49srq7"><h3 class="svelte-49srq7">Create a New Game</h3> <button class="create-btn svelte-49srq7">Create New Game</button></div> <div class="multiplayer-footer svelte-49srq7"><p class="svelte-49srq7"><a target="_blank" class="svelte-49srq7">What's That Baby Name?</a> by Melanie Walsh. <a target="_blank" class="svelte-49srq7">Read the backstory.</a></p></div></div>`),as=$t('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12l5 5l10 -10"></path></svg>'),ss=$t('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><rect x="8" y="8" width="12" height="12" rx="2"></rect><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path></svg>'),rs=w('<span class="host-badge svelte-49srq7">Host</span>'),os=w('<span class="correct-indicator svelte-49srq7">âœ“</span>'),ls=w('<span class="player-score svelte-49srq7"> </span> <!>',1),ns=w('<li class="player-item svelte-49srq7"><span class="player-name svelte-49srq7"> </span> <!></li>'),is=(b,_,u)=>_({maxAttempts:e(u)}),vs=(b,_,u)=>_({correctPoints:e(u)}),cs=(b,_,u)=>_({incorrectPoints:e(u)}),us=w(`<div class="game-container svelte-49srq7"><div class="player-identity svelte-49srq7"><p class="svelte-49srq7">You are <strong class="svelte-49srq7"> </strong> (Host)</p></div> <div class="game-header svelte-49srq7"><h2 class="svelte-49srq7">Room Code: <span class="room-code svelte-49srq7"> </span> <button class="copy-icon svelte-49srq7"><!></button></h2> <div class="header-actions svelte-49srq7"><button class="share-link-btn svelte-49srq7"> </button> <button class="leave-btn svelte-49srq7">Leave Room</button></div></div> <div class="players-panel svelte-49srq7"><h3 class="svelte-49srq7"> </h3> <ul class="players-list svelte-49srq7"></ul></div> <div class="game-settings svelte-49srq7"><h3 class="svelte-49srq7">Game Settings</h3> <div class="settings-row svelte-49srq7"><label class="svelte-49srq7"><span class="svelte-49srq7">Max Attempts:</span> <input type="number" min="1" max="10" class="settings-input svelte-49srq7"></label> <label class="svelte-49srq7"><span class="svelte-49srq7">Points for Correct:</span> <input type="number" min="0" max="10" class="settings-input svelte-49srq7"></label> <label class="svelte-49srq7"><span class="svelte-49srq7">Points for Incorrect:</span> <input type="number" min="-5" max="5" class="settings-input svelte-49srq7"></label></div></div> <div class="game-area svelte-49srq7"><!></div> <div class="host-controls svelte-49srq7"><p class="hint svelte-49srq7">Use the chart controls above to choose two names. When ready, click "Set
				Names & Start" to begin the round.</p></div> <div class="multiplayer-footer svelte-49srq7"><p class="svelte-49srq7"><a target="_blank" class="svelte-49srq7">What's That Baby Name?</a> by Melanie Walsh. <a target="_blank" class="svelte-49srq7">Read the backstory.</a></p></div></div>`),ds=$t('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12l5 5l10 -10"></path></svg>'),ps=$t('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><rect x="8" y="8" width="12" height="12" rx="2"></rect><path d="M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"></path></svg>'),ms=w('<span class="host-badge svelte-49srq7">Host</span>'),hs=w('<span class="correct-indicator svelte-49srq7">âœ“</span>'),fs=w('<span class="player-score svelte-49srq7"> </span> <!>',1),_s=w('<li class="player-item svelte-49srq7"><span class="player-name svelte-49srq7"> </span> <!></li>'),gs=w('<h3 style="color: #4caf50;" class="svelte-49srq7">âœ“ Correct!</h3> <p class="svelte-49srq7">You got it right!</p> <p class="svelte-49srq7">Waiting for the host to start a new round...</p>',1),ys=w('<h3 class="svelte-49srq7">No Attempts Remaining</h3> <p class="svelte-49srq7"> </p> <p class="svelte-49srq7">Waiting for the host to start a new round...</p>',1),bs=w('<div class="attempts-overlay svelte-49srq7"><div class="overlay-message svelte-49srq7"><!></div></div>'),ws=w("<div><!> <!></div>"),xs=w('<div class="waiting-message svelte-49srq7"><h3 class="svelte-49srq7">Loading...</h3> <p class="svelte-49srq7">Connecting to game...</p></div>'),qs=w('<div class="waiting-message svelte-49srq7"><h3 class="svelte-49srq7">Game Setup in Progress...</h3> <p class="svelte-49srq7">Waiting for the host to start the game</p></div>'),Cs=w('<p class="max-attempts-reached svelte-49srq7">No attempts remaining</p>'),ks=w('<p class="result-correct svelte-49srq7">âœ“ Correct!</p>'),Ms=w('<p class="result-incorrect svelte-49srq7">âœ— Try again!</p>'),Ps=w('<p class="svelte-49srq7"> </p> <p class="svelte-49srq7"> </p> <!> <!>',1),Ss=w(`<div class="game-container svelte-49srq7"><div class="player-identity svelte-49srq7"><p class="svelte-49srq7">You are <strong class="svelte-49srq7"> </strong> (Player)</p></div> <div class="game-header svelte-49srq7"><h2 class="svelte-49srq7">Room Code: <span class="room-code svelte-49srq7"> </span> <button class="copy-icon svelte-49srq7"><!></button></h2> <div class="header-actions svelte-49srq7"><button class="share-link-btn svelte-49srq7"> </button> <button class="leave-btn svelte-49srq7">Leave Room</button></div></div> <div class="players-panel svelte-49srq7"><h3 class="svelte-49srq7"> </h3> <ul class="players-list svelte-49srq7"></ul></div> <div class="game-area svelte-49srq7"><!></div> <div class="player-status svelte-49srq7"><!></div> <div class="multiplayer-footer svelte-49srq7"><p class="svelte-49srq7"><a target="_blank" class="svelte-49srq7">What's That Baby Name?</a> by Melanie Walsh. <a target="_blank" class="svelte-49srq7">Read the backstory.</a></p></div></div>`);function Bs(b,_){ia(_,!0),st(_,"id",3,"multiplayer-versus-game");let u=m("menu"),h=m(""),B=m(""),W=m(""),K=m(""),d=m(null),j=m(Fe([])),P=null,G=null,fe=m(""),T=m(null),E=m(null),se=m(null),pe=m(""),_e=m(3),Me=m(1),Ee=m(0),_t=ke(()=>e(j).slice().sort((c,A)=>{var y,H;return c.id===((y=e(d))==null?void 0:y.host)?-1:A.id===((H=e(d))==null?void 0:H.host)?1:(A.score||0)-(c.score||0)}));function ge(){return Math.random().toString(36).substring(2,8).toUpperCase()}async function Oe(){if(!he){alert("Firebase is not initialized. Please refresh the page.");return}if(!e(K).trim()){alert("Please enter your name");return}t(W,e(K).trim(),!0),t(h,ge(),!0),t(fe,ea(De(he)).key,!0),P=De(he,`versus-rooms/${e(h)}`),await jt(P,{host:e(fe),hostName:e(W),name1:"",name2:"",isHidden:!1,createdAt:Date.now(),gameStarted:!1,maxAttempts:e(_e),correctPoints:e(Me),incorrectPoints:e(Ee)});const c=De(he,`versus-rooms/${e(h)}/players/${e(fe)}`);await jt(c,{name:e(W),score:0,lastGuess1:"",lastGuess2:"",isCorrect:!1,attemptCount:0,joinedAt:Date.now()}),t(u,"host"),yt(),gt()}async function Ze(){if(!he){alert("Firebase is not initialized. Please refresh the page.");return}if(!e(K).trim()){alert("Please enter your name");return}if(!e(B).trim()){alert("Please enter a room code");return}t(W,e(K).trim(),!0),t(h,e(B).trim().toUpperCase(),!0),t(fe,ea(De(he)).key,!0),P=De(he,`versus-rooms/${e(h)}`);const c=De(he,`versus-rooms/${e(h)}/players/${e(fe)}`);await jt(c,{name:e(W),score:0,lastGuess1:"",lastGuess2:"",isCorrect:!1,attemptCount:0,joinedAt:Date.now()}),t(u,"player"),yt(),gt()}function gt(){P=De(he,`versus-rooms/${e(h)}`),ta(P,c=>{c.exists()&&t(d,c.val(),!0)}),G=De(he,`versus-rooms/${e(h)}/players`),ta(G,c=>{if(c.exists()){const A=c.val();t(j,Object.entries(A).map(([y,H])=>({id:y,...H})),!0)}})}async function Be(c){e(u)==="host"&&P&&await Vt(P,c)}let J=m(""),re=m(""),Ke=m(!1);async function rt(){if(e(u)==="host"&&e(j).length>0){console.log("[VersusMultiplayer] Resetting all players attempt counts for",e(j).length,"players");const c=e(j).map(A=>{const y=De(he,`versus-rooms/${e(h)}/players/${A.id}`);return console.log("[VersusMultiplayer] Resetting attemptCount and isCorrect for player:",A.name),Vt(y,{attemptCount:0,isCorrect:!1})});await Promise.all(c),console.log("[VersusMultiplayer] All attempt counts reset")}}Et(()=>{if(e(u)==="host"&&e(T)){const c=new MutationObserver(()=>{const y=!!e(T).querySelector(".draggable-names");console.log("[VersusMultiplayer] MutationObserver fired - isHidden:",y);const H=e(T).querySelector(".possible-names");if(H){const S=H.textContent.trim().match(/(.+)\s+vs\.\s+(.+)/);S&&(t(J,S[1].trim(),!0),t(re,S[2].trim(),!0),console.log("[VersusMultiplayer] Found names from .possible-names:",e(J),e(re)))}if(!y){const D=e(T).querySelector(".names-revealed");if(D){const S=D.querySelectorAll("span");S.length>=3&&(t(J,S[0].textContent.trim(),!0),t(re,S[2].textContent.trim(),!0),console.log("[VersusMultiplayer] Found names from .names-revealed:",e(J),e(re)))}}e(d)&&(e(d).isHidden!==y||e(d).name1!==e(J)||e(d).name2!==e(re))?(console.log("[VersusMultiplayer] Updating Firebase with:",{isHidden:y,name1:e(J),name2:e(re)}),!e(Ke)&&y?(console.log("[VersusMultiplayer] New round starting, resetting attempts"),rt().then(()=>{Be({isHidden:y,name1:e(J),name2:e(re)})})):Be({isHidden:y,name1:e(J),name2:e(re)}),t(Ke,y)):console.log("[VersusMultiplayer] No Firebase update needed. Current state:",{isHidden:y,name1:e(J),name2:e(re),gameState:e(d)})});return c.observe(e(T),{childList:!0,subtree:!0,characterData:!0}),()=>c.disconnect()}});async function ot(c,A){if(!e(d)||!e(d).isHidden||!c.trim()||!A.trim())return;const y=e(j).find(Ye=>Ye.id===e(fe)),H=(y==null?void 0:y.attemptCount)||0,D=e(d).maxAttempts??3;if(console.log("[Attempt Check] Current attempts:",H,"Max allowed:",D),H>=D){console.log("Max attempts reached - blocking submission");return}const S=c.toLowerCase().trim(),ee=A.toLowerCase().trim(),U=`${S}|${ee}`;if(U===e(pe)){console.log("Duplicate guess detected (same as last), skipping");return}console.log("[Submitting Guess]",S,"and",ee),t(pe,U),setTimeout(()=>{e(pe)===U&&t(pe,"")},1e3);const O=e(d).name1.toLowerCase().trim(),I=e(d).name2.toLowerCase().trim(),k=S===O&&ee===I;console.log("Guess 1:",S,"Guess 2:",ee),console.log("Name 1:",O,"Name 2:",I),console.log("Correct:",k);const te=(y==null?void 0:y.score)||0,V=e(d).correctPoints??1,F=e(d).incorrectPoints??0,$e=k?V:F,me=te+$e,Te=H+1;console.log("GameState correctPoints:",e(d).correctPoints,"incorrectPoints:",e(d).incorrectPoints),console.log("Using correctPts:",V,"incorrectPts:",F),console.log("Current score:",te,"Points to add:",$e,"New score:",me),console.log("Attempt count:",H,"New attempt count:",Te);const be=De(he,`versus-rooms/${e(h)}/players/${e(fe)}`);await Vt(be,{lastGuess1:c,lastGuess2:A,isCorrect:k,score:me,attemptCount:Te,guessedAt:Date.now()}),t(se,k?"correct":"incorrect",!0),setTimeout(()=>{t(se,null)},2e3)}Et(()=>{var c;if(e(u)==="player"&&e(E)&&((c=e(d))!=null&&c.isHidden)){e(E).querySelectorAll(".chart-drop-zone");const A=new MutationObserver(()=>{const y=e(E).querySelector(".chart-drop-zone:nth-of-type(1) .drop-label"),H=e(E).querySelector(".chart-drop-zone:nth-of-type(2) .drop-label");if(y&&H){const D=y.textContent.trim(),S=H.textContent.trim();D&&S&&D!=="â†“"&&S!=="â†“"&&setTimeout(()=>{ot(D,S)},200)}});return A.observe(e(E),{childList:!0,subtree:!0,characterData:!0}),()=>A.disconnect()}});let ye=m("Copy");function yt(){if(e(h)){const c=new URL(window.location.href);c.searchParams.set("room",e(h)),window.history.pushState({},"",c)}}function lt(){if(e(h)){const c=new URL(window.location.href);return c.searchParams.set("room",e(h)),c.toString()}return""}let Pe=m("Copy Link");function Ge(){P&&Ft(P),G&&Ft(G),t(u,"menu"),t(h,""),t(B,""),t(d,null),t(j,[],!0),t(ye,"Copy"),t(Pe,"Copy Link"),t(pe,"");{const c=new URL(window.location.href);c.searchParams.delete("room"),window.history.pushState({},"",c)}}ca(()=>{{const A=new URLSearchParams(window.location.search).get("room");A&&t(B,A.toUpperCase(),!0)}}),ha(()=>{P&&Ft(P),G&&Ft(G)});var bt=Xt(),nt=je(bt);{var Lt=c=>{var A=ts(),y=o(r(A),2),H=o(r(y),2);ft(H),s(y);var D=o(y,2),S=o(r(D),2);ft(S);var ee=o(S,2);ee.__click=Ze,s(D);var U=o(D,2),O=o(r(U),2);O.__click=Oe,s(U);var I=o(U,2),le=r(I),ce=r(le);at(ce,"href",`${mt??""}/`);var k=o(ce,2);at(k,"href",`${mt??""}/#origin-story`),s(le),s(I),s(A),ht(H,()=>e(K),te=>t(K,te)),ht(S,()=>e(B),te=>t(B,te)),p(c,A)},Ht=(c,A)=>{{var y=D=>{var S=us(),ee=r(S),U=r(ee),O=o(r(U)),I=r(O,!0);s(O),Dt(),s(U),s(ee);var le=o(ee,2),ce=r(le),k=o(r(ce)),te=r(k,!0);s(k);var V=o(k,2);V.__click=[ra,h,ye];var F=r(V);{var $e=g=>{var R=as();p(g,R)},me=g=>{var R=ss();p(g,R)};M(F,g=>{e(ye)==="Copied!"?g($e):g(me,!1)})}s(V),s(ce);var Te=o(ce,2),be=r(Te);be.__click=[oa,lt,Pe];var Ye=r(be,!0);s(be);var wt=o(be,2);wt.__click=Ge,s(Te),s(le);var we=o(le,2),Je=r(we),xt=r(Je);s(Je);var Ie=o(Je,2);Bt(Ie,21,()=>e(_t),Gt,(g,R)=>{var ae=ns(),ne=r(ae),Le=r(ne,!0);s(ne);var xe=o(ne,2);{var Z=Y=>{var a=rs();p(Y,a)},ie=Y=>{var a=ls(),l=je(a),i=r(l,!0);s(l);var v=o(l,2);{var f=q=>{var n=os();p(q,n)};M(v,q=>{e(R).isCorrect&&q(f)})}Q(()=>L(i,e(R).score)),p(Y,a)};M(xe,Y=>{var a;e(R).id===((a=e(d))==null?void 0:a.host)?Y(Z):Y(ie,!1)})}s(ae),Q(()=>L(Le,e(R).name)),p(g,ae)}),s(Ie),s(we);var Se=o(we,2),qt=o(r(Se),2),Xe=r(qt),Ae=o(r(Xe),2);ft(Ae),Ae.__change=[is,Be,_e],s(Xe);var it=o(Xe,2),vt=o(r(it),2);ft(vt),vt.__change=[vs,Be,Me],s(it);var ze=o(it,2),Ne=o(r(ze),2);ft(Ne),Ne.__change=[cs,Be,Ee],s(ze),s(qt),s(Se);var Qe=o(Se,2),Mt=r(Qe);sa(Mt,{defaultName1:"Charlotte",defaultName2:"Isabella",startHidden:!1,showControls:!0,startYear:1920}),s(Qe),Ot(Qe,g=>t(T,g),()=>e(T));var Re=o(Qe,4),et=r(Re),ct=r(et);at(ct,"href",`${mt??""}/`);var Ct=o(ct,2);at(Ct,"href",`${mt??""}/#origin-story`),s(et),s(Re),s(S),Q(()=>{L(I,e(W)),L(te,e(h)),at(V,"title",e(ye)==="Copied!"?"Copied!":"Copy to clipboard"),L(Ye,e(Pe)),L(xt,`Players (${e(j).length??""})`)}),ht(Ae,()=>e(_e),g=>t(_e,g)),ht(vt,()=>e(Me),g=>t(Me,g)),ht(Ne,()=>e(Ee),g=>t(Ee,g)),p(D,S)},H=(D,S)=>{{var ee=U=>{var O=Ss(),I=r(O),le=r(I),ce=o(r(le)),k=r(ce,!0);s(ce),Dt(),s(le),s(I);var te=o(I,2),V=r(te),F=o(r(V)),$e=r(F,!0);s(F);var me=o(F,2);me.__click=[ra,h,ye];var Te=r(me);{var be=g=>{var R=ds();p(g,R)},Ye=g=>{var R=ps();p(g,R)};M(Te,g=>{e(ye)==="Copied!"?g(be):g(Ye,!1)})}s(me),s(V);var wt=o(V,2),we=r(wt);we.__click=[oa,lt,Pe];var Je=r(we,!0);s(we);var xt=o(we,2);xt.__click=Ge,s(wt),s(te);var Ie=o(te,2),Se=r(Ie),qt=r(Se);s(Se);var Xe=o(Se,2);Bt(Xe,21,()=>e(_t),Gt,(g,R)=>{var ae=_s(),ne=r(ae),Le=r(ne,!0);s(ne);var xe=o(ne,2);{var Z=Y=>{var a=ms();p(Y,a)},ie=Y=>{var a=fs(),l=je(a),i=r(l,!0);s(l);var v=o(l,2);{var f=q=>{var n=hs();p(q,n)};M(v,q=>{e(R).isCorrect&&q(f)})}Q(()=>L(i,e(R).score)),p(Y,a)};M(xe,Y=>{var a;e(R).id===((a=e(d))==null?void 0:a.host)?Y(Z):Y(ie,!1)})}s(ae),Q(()=>L(Le,e(R).name)),p(g,ae)}),s(Xe),s(Ie);var Ae=o(Ie,2),it=r(Ae);{var vt=g=>{var R=Xt();const ae=ke(()=>e(j).find(Z=>Z.id===e(fe)));var ne=je(R);{var Le=Z=>{var ie=ws();const Y=ke(()=>e(ae).attemptCount||0),a=ke(()=>e(d).maxAttempts??1),l=ke(()=>e(Y)<e(a)),i=ke(()=>e(ae).isCorrect),v=ke(()=>!e(l)||e(i));let f;var q=r(ie);Na(q,()=>`${e(d).name1}-${e(d).name2}-${e(d).isHidden}`,x=>{sa(x,{get defaultName1(){return e(d).name1},get defaultName2(){return e(d).name2},get startHidden(){return e(d).isHidden},showControls:!1,startYear:1920})});var n=o(q,2);{var C=x=>{var N=bs(),$=r(N),ve=r($);{var Pt=z=>{var ue=gs();Dt(4),p(z,ue)},St=z=>{var ue=ys(),We=o(je(ue),2),qe=r(We);s(We),Dt(2),Q(()=>L(qe,`You've used all ${e(a)??""} attempts for this round`)),p(z,ue)};M(ve,z=>{e(i)?z(Pt):z(St,!1)})}s($),s(N),p(x,N)};M(n,x=>{e(v)&&x(C)})}s(ie),Q(x=>f=pt(ie,1,"chart-container svelte-49srq7",null,f,x),[()=>({disabled:e(v)})]),p(Z,ie)},xe=Z=>{var ie=xs();p(Z,ie)};M(ne,Z=>{e(ae)?Z(Le):Z(xe,!1)})}p(g,R)},ze=g=>{var R=qs();p(g,R)};M(it,g=>{e(d)&&e(d).name1&&e(d).name2&&e(d).isHidden?g(vt):g(ze,!1)})}s(Ae),Ot(Ae,g=>t(E,g),()=>e(E));var Ne=o(Ae,2),Qe=r(Ne);{var Mt=g=>{var R=Ps();const ae=ke(()=>e(j).find(n=>n.id===e(fe))),ne=ke(()=>{var n;return((n=e(ae))==null?void 0:n.attemptCount)||0}),Le=ke(()=>e(d).maxAttempts??3),xe=ke(()=>e(Le)-e(ne));var Z=je(R),ie=r(Z);s(Z);var Y=o(Z,2),a=r(Y);s(Y);var l=o(Y,2);{var i=n=>{var C=Cs();p(n,C)};M(l,n=>{e(xe)<=0&&n(i)})}var v=o(l,2);{var f=n=>{var C=ks();p(n,C)},q=(n,C)=>{{var x=N=>{var $=Ms();p(N,$)};M(n,N=>{e(se)==="incorrect"&&N(x)},C)}};M(v,n=>{e(se)==="correct"?n(f):n(q,!1)})}Q(()=>{var n;L(ie,`Your score: ${(((n=e(ae))==null?void 0:n.score)||0)??""}`),L(a,`Attempts remaining: ${e(xe)??""}/${e(Le)??""}`)}),p(g,R)};M(Qe,g=>{e(d)&&g(Mt)})}s(Ne);var Re=o(Ne,2),et=r(Re),ct=r(et);at(ct,"href",`${mt??""}/`);var Ct=o(ct,2);at(Ct,"href",`${mt??""}/#origin-story`),s(et),s(Re),s(O),Q(()=>{L(k,e(W)),L($e,e(h)),at(me,"title",e(ye)==="Copied!"?"Copied!":"Copy to clipboard"),L(Je,e(Pe)),L(qt,`Players (${e(j).length??""})`)}),p(U,O)};M(D,U=>{e(u)==="player"&&U(ee)},S)}};M(c,D=>{e(u)==="host"?D(y):D(H,!1)},A)}};M(nt,c=>{e(u)==="menu"?c(Lt):c(Ht,!1)})}p(b,bt),va()}na(["click","change"]);export{Bs as V,sa as a,aa as b};
